# Geneformer Fine-tuning Configuration

# Model settings
model:
  name: "ctheodoris/Geneformer"
  version: "V1"  # V1 (10M) or V2 (104M/316M)
  freeze_layers: 2  # Number of layers to freeze (0 = train all)

# Data settings
data:
  dataset_file: "cell_type_train_data.dataset"  # Path to downloaded dataset
  cell_state_key: "disease"                    # Column name for labels
  cell_types:                                    # Cardiomyopathy classifications
    - "nf"              # NF - Healthy
    - "hcm"  # HCM
    - "dcm"       # DCM
  max_cells: None               # Max number of cells to use
  train_test_split: 0.2          # Test set proportion

# Training hyperparameters
training:
  num_epochs: 0.9                
  learning_rate: 0.000804        
  batch_size: 12                 
  gradient_accumulation_steps: 1
  warmup_steps: 1812             
  weight_decay: 0.258828         
  optimizer: "adamw"
  lr_scheduler: "polynomial"
  max_grad_norm: 1.0
  # Mixed precision (adjust based on your GPU)
  fp16: false                     # Enable for T4/V100 GPUs
  bf16: true                      # Enable for A100/RTX 30xx+ GPUs  
  tf32: false                     # Enable for A100 GPUs only

# Evaluation
evaluation:
  strategy: "steps"
  eval_steps: 1000
  save_strategy: "steps"
  save_steps: 1000
  save_total_limit: 5
  load_best_model_at_end: true
  metric_for_best_model: "eval_loss"

# Logging
logging:
  steps: 500
  wandb_enabled: false
  output_dir: "outputs"
  output_prefix: "cardiomyopathy_classifier"

# Dataloader settings
dataloader:
  num_workers: 4
  pin_memory: true
  prefetch_factor: 2
  group_by_length: false

# Environment
environment:
  nproc: 1                        # Number of processes for data prep
  seed: 42

